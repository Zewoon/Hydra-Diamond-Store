<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hydra Diamond Store</title>
</head>
<body>
  <h1>Hydra Diamond Store</h1>
  <form id="buyer-form">
    <label for="buyer-id">Your ID:</label>
    <input type="text" id="buyer-id" name="buyerID" required>

    <label for="payment-method">Payment Method:</label>
    <select id="payment-method" name="paymentMethod" required>
      <option value="Bank of Georgia">Bank of Georgia</option>
      <option value="TBC Bank">TBC Bank</option>
    </select>

    <label for="screenshot">Upload Payment Screenshot:</label>
    <input type="file" id="screenshot" name="screenshot" accept="image/*" required>

    <button type="button" onclick="submitOrder()">Submit</button>
  </form>

  <!-- Firebase Libraries -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>

  <!-- Firebase Configuration and Submit Function -->
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDqykzzebL74usRTv9EZ8Ynn_pbJmQVTq0",
      authDomain: "diamond-store-hydra.firebaseapp.com",
      projectId: "diamond-store-hydra",
      storageBucket: "diamond-store-hydra.appspot.com",
      messagingSenderId: "263133028845",
      appId: "1:263133028845:web:7e84d809f3211e26dc47e4",
      measurementId: "G-B1RVH2CCX1"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();

    // Submit Order Function
    async function submitOrder() {
      const buyerID = document.getElementById('buyer-id').value;
      const paymentMethod = document.getElementById('payment-method').value;
      const screenshot = document.getElementById('screenshot').files[0];

      if (!buyerID || !paymentMethod || !screenshot) {
        alert('Please complete all fields!');
        return;
      }

      try {
        // Upload screenshot to Firebase Storage
        const storageRef = storage.ref(`screenshots/${buyerID}_${Date.now()}`);
        const uploadTask = await storageRef.put(screenshot);
        const screenshotURL = await uploadTask.ref.getDownloadURL();

        // Save submission to Firestore
        await db.collection('payments').add({
          buyerID: buyerID,
          paymentMethod: paymentMethod,
          screenshotURL: screenshotURL,
          status: 'Pending',
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
        });

        alert('Your order has been submitted!');
      } catch (error) {
        console.error('Error submitting order:', error);
        alert('Failed to submit your order. Please try again.');
      }
    }
  </script>
</body>
</html>
<link rel="stylesheet" href="styles.css">
